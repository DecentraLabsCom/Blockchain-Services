# -----------------------------------------------------------------------------
# SMART CONTRACT CONFIGURATION
# -----------------------------------------------------------------------------
CONTRACT_ADDRESS=0xC332F296d698bb05Fbad7863131F36085F6ce66d

# Legacy RPC URL (fallback if network-specific URLs not available)
RPC_URL=https://1rpc.io/sepolia

# -----------------------------------------------------------------------------
# NETWORK-SPECIFIC RPC URLs (with automatic failover)
# -----------------------------------------------------------------------------
# Format: comma-separated list - tries each endpoint in order
# Service tries each URL in order until one succeeds
# Recommended: Mix free public endpoints or use paid services for reliability
#
# Free providers with API keys:
# - Infura: https://infura.io (100k requests/day free)
# - Alchemy: https://alchemy.com (300M compute units/month free)
ETHEREUM_MAINNET_RPC_URL=https://eth.public-rpc.com
ETHEREUM_SEPOLIA_RPC_URL=https://1rpc.io/sepolia,https://ethereum-sepolia-rpc.publicnode.com,https://eth-sepolia.g.alchemy.com/v2/demo,https://0xrpc.io/sep,https://ethereum-sepolia-public.nodies.app

# -----------------------------------------------------------------------------
# INSTITUTIONAL WALLET (optional overrides)
# -----------------------------------------------------------------------------
# Normally you create/import the institutional wallet via /wallet-dashboard.
# The app then stores the encrypted key in /app/data/wallets.json and writes
# address/password to /app/data/wallet-config.properties. Leave these empty to
# rely on that auto-configuration. Only set them if you need to override with
# external secret management (env vars take precedence over the config file).
INSTITUTIONAL_WALLET_ADDRESS=
INSTITUTIONAL_WALLET_PASSWORD=

# -----------------------------------------------------------------------------
# WALLET PERSISTENCE
# -----------------------------------------------------------------------------
WALLET_PERSISTENCE_ENABLED=true
WALLET_FILE_PATH=/app/data/wallets.json

# REQUIRED for wallet persistence: Encryption key for wallet password storage
# Leave empty to let the service auto-generate it into WALLET_CONFIG_KEY_FILE
WALLET_CONFIG_ENCRYPTION_KEY=
# Persistent file that stores the auto-generated encryption key (must be mounted)
WALLET_CONFIG_KEY_FILE=/app/data/.wallet-encryption-key

# -----------------------------------------------------------------------------
# JWT KEY PATHS
# -----------------------------------------------------------------------------
# Keep defaults unless mounting keys from different location
PRIVATE_KEY_PATH=/app/config/keys/private_key.pem
PUBLIC_KEY_PATH=/app/config/keys/public_key.pem

# -----------------------------------------------------------------------------
# SAML/SSO CONFIGURATION
# -----------------------------------------------------------------------------
# trust-mode: 
#   - 'any': Trust any IdP with valid SAML signature (flexible, less secure)
#   - 'whitelist': Only trust specific IdPs listed below (recommended for production)
SAML_IDP_TRUST_MODE=any

# Trusted IdP Issuers (only used if trust-mode=whitelist)
# Format: {'institutionId':'idpIssuerUrl', 'institutionId2':'idpIssuerUrl2'}
SAML_TRUSTED_IDP={'uned':'https://idp.uned.es','ucm':'https://idp.ucm.es'}

# -----------------------------------------------------------------------------
# FEATURE TOGGLES
# -----------------------------------------------------------------------------
# Enable Treasury and Provider management features
FEATURES_PROVIDERS_ENABLED=true

# -----------------------------------------------------------------------------
# ANTI-REPLAY PROTECTION
# -----------------------------------------------------------------------------
# For single instance: false (uses in-memory cache with 5 min expiration)
# For multiple instances: true (requires Redis)
ANTIREPLAY_PERSISTENCE_ENABLED=false

WEBAUTHN_CREDENTIALS_TABLE=webauthn_credentials

# -----------------------------------------------------------------------------
# SECURITY & API
# -----------------------------------------------------------------------------
ALLOWED_ORIGINS=http://localhost:3000,https://marketplace-decentralabs.vercel.app
MARKETPLACE_PUBLIC_KEY_URL=https://marketplace-decentralabs.vercel.app/.well-known/public-key.pem
MARKETPLACE_URL=https://marketplace-decentralabs.vercel.app
LOG_LEVEL_AUTH=INFO
LOG_LEVEL_SECURITY=WARN
LOG_LEVEL_WEB=WARN

# -----------------------------------------------------------------------------
# ADMIN DASHBOARD ACCESS
# -----------------------------------------------------------------------------
# Allows you to disable localhost-only protection for the treasury dashboard.
# Set to false when running standalone (default for docker-compose.override).
# Leave unset/true when the service sits behind a reverse proxy (OpenResty).
ADMIN_DASHBOARD_LOCAL_ONLY=false

# -----------------------------------------------------------------------------
# SPRING BOOT / TOMCAT
# -----------------------------------------------------------------------------
TOMCAT_MAX_THREADS=200
TOMCAT_MIN_THREADS=10
JPA_DDL_AUTO=validate
JPA_SHOW_SQL=false

# -----------------------------------------------------------------------------
# NOTIFICACIONES DE RESERVAS (correo + ICS)
# -----------------------------------------------------------------------------
NOTIFICATIONS_MAIL_ENABLED=true
NOTIFICATIONS_MAIL_DRIVER=noop
NOTIFICATIONS_MAIL_FROM=
NOTIFICATIONS_MAIL_FROM_NAME=Lab Gateway
NOTIFICATIONS_MAIL_DEFAULT_TO=
NOTIFICATIONS_MAIL_TIMEZONE=UTC

# SMTP (driver=smtp)
NOTIFICATIONS_MAIL_SMTP_HOST=
NOTIFICATIONS_MAIL_SMTP_PORT=587
NOTIFICATIONS_MAIL_SMTP_USERNAME=
NOTIFICATIONS_MAIL_SMTP_PASSWORD=
NOTIFICATIONS_MAIL_SMTP_AUTH=true
NOTIFICATIONS_MAIL_SMTP_STARTTLS=true
NOTIFICATIONS_MAIL_SMTP_TIMEOUT_MS=10000

# Microsoft Graph (driver=graph)
NOTIFICATIONS_MAIL_GRAPH_TENANT_ID=
NOTIFICATIONS_MAIL_GRAPH_CLIENT_ID=
NOTIFICATIONS_MAIL_GRAPH_CLIENT_SECRET=
NOTIFICATIONS_MAIL_GRAPH_FROM=
NOTIFICATIONS_CONFIG_FILE=./data/notifications-config.json
