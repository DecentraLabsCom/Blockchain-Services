<?xml version="1.0" encoding="UTF-8"?>
<configuration scan="true">
    <springProperty scope="context" name="appName" source="spring.application.name" defaultValue="blockchain-services"/>
    <springProperty scope="context" name="appEnv" source="spring.profiles.active" defaultValue="default"/>

    <springProperty scope="context" name="logLevelRoot" source="LOG_LEVEL_ROOT" defaultValue="INFO"/>
    <springProperty scope="context" name="logLevelAuth" source="LOG_LEVEL_AUTH" defaultValue="INFO"/>
    <springProperty scope="context" name="logLevelSecurity" source="LOG_LEVEL_SECURITY" defaultValue="WARN"/>
    <springProperty scope="context" name="logLevelWeb" source="LOG_LEVEL_WEB" defaultValue="WARN"/>

    <appender name="CONSOLE" class="ch.qos.logback.core.ConsoleAppender">
        <encoder class="ch.qos.logback.classic.encoder.PatternLayoutEncoder">
            <pattern>ts=%d{yyyy-MM-dd'T'HH:mm:ss.SSSXXX} level=%p service=${appName} env=${appEnv} thread=%t logger=%c{36} msg="%replace(%msg){'\n','\\n'}" traceId=%X{traceId:-} spanId=%X{spanId:-}%n</pattern>
        </encoder>
    </appender>

    <root level="${logLevelRoot}">
        <appender-ref ref="CONSOLE"/>
    </root>

    <logger name="decentralabs.blockchain" level="${logLevelAuth}"/>
    <logger name="org.springframework.security" level="${logLevelSecurity}"/>
    <logger name="org.springframework.web" level="${logLevelWeb}"/>
</configuration>
